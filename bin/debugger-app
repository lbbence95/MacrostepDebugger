#!/usr/bin/env python

# Debugger CLI functions related to apllications.

import controller.controller as mstep_controller
import argparse, logging

#Logger setup
logger = logging.getLogger('debugger_app')
logger.propagate = False
logger.setLevel(logging.INFO)

console_handler = logging.StreamHandler()
formatter = logging.Formatter('*** (%(asctime)s): %(message)s', "%Y-%m-%d %H:%M:%S")
console_handler.setFormatter(formatter)

logger.addHandler(console_handler)

#Options and suboptions
parser = argparse.ArgumentParser(description='Commands related to the applications handled by the debugger.')
exclusive_group = parser.add_mutually_exclusive_group()
sub_group = parser.add_argument_group()

#Option: Define new application
exclusive_group.add_argument('-i', '--import_app', type=str, metavar='APP_DESC', nargs=1, help='import an application descriptor file')

#Argparse
args = parser.parse_args()

if __name__ == "__main__":
    
    # -a: Register new application
    if (args.import_app != None):
        mstep_controller.Process_app_descriptor(args.import_app[0])